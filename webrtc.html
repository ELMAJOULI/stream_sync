<html>
  <body>
    <style>
      #outgoing {
        width: 600px;
        word-wrap: break-word;
        white-space: normal;
      }
    </style>
    <form>
      <textarea id="incoming"></textarea>
      <button type="submit">submit</button>
    </form>
    <pre id="outgoing"></pre>
    <script src="simplepeer.min.js"></script>
    <script>
      const p = new SimplePeer({
        initiator: location.hash === "#1",
        trickle: false
      });

    //   var Peer = require("simple-peer");

      var peer1 = new SimplePeer({
        initiator: true
      });
      var peer2 = new SimplePeer({});

      peer1.on("signal", data => {
        // when peer1 has signaling data, give it to peer2 somehow
        peer2.signal(data);
      });

      peer2.on("signal", data => {
        // when peer2 has signaling data, give it to peer1 somehow
        peer1.signal(data);
      });

      peer1.on("connect", () => {
        // wait for 'connect' event before using the data channel
        peer1.send("hey peer2, how is it going?");
      });

      peer2.on("data", data => {
        // got a data channel message
        console.log("got a message from peer1: " + data);
      });
    </script>
  </body>
</html>
